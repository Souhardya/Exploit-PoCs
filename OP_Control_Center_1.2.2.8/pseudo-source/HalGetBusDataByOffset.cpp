__int64 __fastcall sub_140001000(__int16 a1, ULONG a2, void *a3, ULONG a4)
{
  unsigned int v8; // er15
  KIRQL v9; // bp
  ULONG v10; // eax

  v8 = 0;
  v9 = KeAcquireSpinLockRaiseToDpc(&SpinLock);
  v10 = HalGetBusDataByOffset(PCIConfiguration, HIBYTE(a1), (32 * (a1 & 7)) | ((unsigned __int8)a1 >> 3), a3, a2, a4);
  if ( !v10 )
    v8 = -536870911;
  if ( a4 != v10 )
    v8 = -536870908;
  KeReleaseSpinLock(&SpinLock, v9);
  return v8;
}